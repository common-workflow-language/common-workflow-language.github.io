















<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2021-04-06 12:25:37 +0000">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/syntax.css" />

    



    <!-- Favicons for everyone -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../assets/favicons/cwl/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/favicons/cwl/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/favicons/cwl/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/favicons/cwl/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../assets/favicons/cwl/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../assets/favicons/cwl/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../assets/favicons/cwl/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../assets/favicons/cwl/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="../assets/favicons/cwl/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="../assets/favicons/cwl/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="../assets/favicons/cwl/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="../assets/favicons/cwl/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="../assets/favicons/cwl/favicon-128.png" sizes="128x128" />
    <link rel="manifest" href="/manifest.json">
    <meta name="application-name" content="The Common Workflow Language Project - Common Workflow Language User Guide"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="../assets/favicons/cwl/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="../assets/favicons/cwl/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="../assets/favicons/cwl/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="../assets/favicons/cwl/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="../assets/favicons/cwl/mstile-310x310.png" />


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

  <title>
  Nested Workflows &ndash; Common Workflow Language User Guide
  </title>  

  </head>
  <body>

    







    <div class="container">
      







<!-- Manual ordering of Episodes begins here -->








  
  


<!-- Manual ordering of Extras begins here -->






<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      

      
      <a class="navbar-brand" href="../index.html">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="../CODE_OF_CONDUCT.html">Code of Conduct</a></li>

        
	
        <li><a href="../setup.html">Setup</a></li>

        
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            
            <li><a href="../01-introduction/index.html">Introduction</a></li>
            
            
            <li><a href="../02-1st-example/index.html">First Example</a></li>
            
            
            <li><a href="../03-input/index.html">Essential Input Parameters</a></li>
            
            
            <li><a href="../04-output/index.html">Returning Output Files</a></li>
            
            
            <li><a href="../05-stdout/index.html">Capturing Standard Output</a></li>
            
            
            <li><a href="../06-params/index.html">Parameter References</a></li>
            
            
            <li><a href="../07-containers/index.html">Running Tools Inside Docker</a></li>
            
            
            <li><a href="../08-arguments/index.html">Additional Arguments and Parameters</a></li>
            
            
            <li><a href="../09-array-inputs/index.html">Array Inputs</a></li>
            
            
            <li><a href="../10-array-outputs/index.html">Array Outputs</a></li>
            
            
            <li><a href="../11-records/index.html">Advanced Inputs</a></li>
            
            
            <li><a href="../12-env/index.html">Environment Variables</a></li>
            
            
            <li><a href="../13-expressions/index.html">JavaScript Expressions</a></li>
            
            
            <li><a href="../14-runtime/index.html">Creating Files at Runtime</a></li>
            
            
            <li><a href="../15-staging/index.html">Staging Input Files</a></li>
            
            
            <li><a href="../16-file-formats/index.html">File Formats</a></li>
            
            
            <li><a href="../17-metadata/index.html">Metadata and Authorship</a></li>
            
            
            <li><a href="../19-custom-types/index.html">Custom Types</a></li>
            
            
            <li><a href="../20-software-requirements/index.html">Specifying Software Requirements</a></li>
            
            
            <li><a href="../21-1st-workflow/index.html">Writing Workflows</a></li>
            
            
            <li><a href="../22-nested-workflows/index.html">Nested Workflows</a></li>
            
            
            <li><a href="../23-scatter-workflow/index.html">Scattering Workflows</a></li>
            
            
            <li><a href="../24_conditional-workflow/index.html">Conditional workflows</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="../aio/index.html">All in one page (Beta)</a></li>
          </ul>
        </li>
	

	
	
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference.html">Reference</a></li>
            
            
            <li><a href="../misc/">Miscellaneous</a></li>
            
            
            <li><a href="../rec-practices/">Recommended Practices</a></li>
            
            
            <li><a href="../yaml/">YAML Guide</a></li>
            
          </ul>
        </li>
	

	
        <li><a href="../LICENSE.html">License</a></li>
	
	<li><a href="/edit//_episodes/22-nested-workflows.md" data-checker-ignore>Improve this page <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></li>
	
	
	<li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
          <img src="https://upload.wikimedia.org/wikipedia/commons/d/d7/Google_Translate_logo.svg" alt="Google Translate logo" height="15"/>
                EN
          <span class="caret"></span></a>
          <ul class="dropdown-menu">
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=zh-CN&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              ZH-CN
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=zh-TW&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              ZH-TW
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=hi&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              HI
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=es&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              ES
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=fr&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              FR
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ar&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              AR
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=bn&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              BN
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ru&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              RU
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=pt&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              PT
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=id&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              ID
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ur&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              UR
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=de&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              DE
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ja&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              JA
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=sw&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              SW
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=mr&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              MR
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=te&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              TE
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=pa&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              PA
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ta&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              TA
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=tr&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              TR
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ko&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              KO
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=vi&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              VI
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=jw&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              JW
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=it&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              IT
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ha&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              HA
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=th&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              TH
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=gu&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              GU
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=kn&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              KN
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=fa&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              FA
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ms&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              MS
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=pl&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              PL
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=yo&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              YO
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ml&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              ML
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=su&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              SU
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=uz&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              UZ
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ig&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              IG
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ro&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              RO
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=nl&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              NL
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=az&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              AZ
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ku&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              KU
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=am&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              AM
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=mg&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              MG
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=sr&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              SR
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ne&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              NE
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=km&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              KM
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=so&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              SO
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ceb&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              CEB
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=si&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              SI
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=el&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              EL
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=kk&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              KK
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=hu&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              HU
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=zu&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              ZU
              </a>
            </li>
          
            <li>
              <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=cs&u=https%3A%2F%2Fwww.commonwl.org%2Fuser_guide/22-nested-workflows/index.html&edit-text=&act=url" title="">
              CS
              </a>
            </li>
          
          </ul>
        </li>
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>



















<!-- Manual ordering of Episodes begins here -->








  
  


<!-- Manual ordering of Extras begins here -->







<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../21-1st-workflow/index.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
    <h3 class="maintitle"><a href="../">Common Workflow Language User Guide</a></h3>
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../23-scatter-workflow/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>

<article>
<div class="row">
  <div class="col-md-1">
  </div>
  <div class="col-md-10">
    <h1 class="maintitle">Nested Workflows</h1>
  </div>
  <div class="col-md-1">
  </div>
</div>


<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 10 min
      <br/>
      <strong>Exercises:</strong> 0 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li><p>How do I connect multiple workflows together?</p>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Learn how to construct nested workflows from multiple CWL workflow descriptions.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<p>Workflows are ways to combine multiple tools to perform a larger operations.
We can also think of a workflow as being a tool itself; a CWL workflow can be
used as a step in another CWL workflow, if the workflow engine supports the
<code class="language-plaintext highlighter-rouge">SubworkflowFeatureRequirement</code>:</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>requirements:
  SubworkflowFeatureRequirement: {}
</code></pre></div></div>

<p>Here’s an example workflow that uses our <code class="language-plaintext highlighter-rouge">1st-workflow.cwl</code> as a nested
workflow:</p>

<p><em>nestedworkflows.cwl</em></p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#!/usr/bin/env cwl-runner

cwlVersion: v1.0
class: Workflow

inputs: []

outputs:
  classout:
    type: File
    outputSource: compile/compiled_class

requirements:
  SubworkflowFeatureRequirement: {}

steps:
  compile:
    run: 1st-workflow.cwl
    in:
      tarball: create-tar/tar_compressed_java_file
      name_of_file_to_extract:
        default: "Hello.java"
    out: [compiled_class]

  create-tar:
    in: []
    out: [tar_compressed_java_file]
    run:
      class: CommandLineTool
      requirements:
        InitialWorkDirRequirement:
          listing:
            - entryname: Hello.java
              entry: |
                public class Hello {
                  public static void main(String[] argv) {
                      System.out.println("Hello from Java");
                  }
                }
      inputs: []
      baseCommand: [tar, --create, --file=hello.tar, Hello.java]
      outputs:
        tar_compressed_java_file:
          type: File
          streamable: true
          outputBinding:
            glob: "hello.tar"

</code></pre></div></div>

<blockquote class="callout">
  <h2 id="visualization-of-the-workflow-and-the-inner-workflow-from-its-compile-step">Visualization of the workflow and the inner workflow from its <code class="language-plaintext highlighter-rouge">compile</code> step</h2>
  <p>This two-step workflow starts with the <code class="language-plaintext highlighter-rouge">create-tar</code> step which is connected to
the <code class="language-plaintext highlighter-rouge">compile</code> step in orange; <code class="language-plaintext highlighter-rouge">compile</code> is another workflow, diagrammed on the
right. In purple we see the fixed string <code class="language-plaintext highlighter-rouge">"Hello.java"</code> being supplied as the
<code class="language-plaintext highlighter-rouge">name_of_file_to_extract</code>.</p>

  <p><a href="https://view.commonwl.org/workflows/github.com/common-workflow-language/user_guide/blob/gh-pages/_includes/cwl/22-nested-workflows/nestedworkflows.cwl"><img src="https://view.commonwl.org/graph/svg/github.com/common-workflow-language/user_guide/blob/gh-pages/_includes/cwl/22-nested-workflows/nestedworkflows.cwl" alt="Visualization of nestedworkflows.cwl" /></a>
<a href="https://view.commonwl.org/workflows/github.com/common-workflow-language/user_guide/blob/gh-pages/_includes/cwl/22-nested-workflows/1st-workflow.cwl"><img src="https://view.commonwl.org/graph/svg/github.com/common-workflow-language/user_guide/blob/gh-pages/_includes/cwl/22-nested-workflows/1st-workflow.cwl" alt="Visualization of 1st-workflow.cwl" /></a></p>
</blockquote>

<p>A CWL <code class="language-plaintext highlighter-rouge">Workflow</code> can be used as a <code class="language-plaintext highlighter-rouge">step</code> just like a <code class="language-plaintext highlighter-rouge">CommandLineTool</code>, it’s CWL
file is included with <code class="language-plaintext highlighter-rouge">run</code>. The workflow inputs (<code class="language-plaintext highlighter-rouge">inp</code> and <code class="language-plaintext highlighter-rouge">ex</code>) and outputs
(<code class="language-plaintext highlighter-rouge">classout</code>) then can be mapped to become the step’s input/outputs.</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  compile:
    run: 1st-workflow.cwl
    in:
      inp:
        source: create-tar/tar
      ex:
        default: "Hello.java"
    out: [classout]
</code></pre></div></div>

<p>Our <code class="language-plaintext highlighter-rouge">1st-workflow.cwl</code> was parameterized with workflow inputs, so when running
it we had to provide a job file to denote the tar file and <code class="language-plaintext highlighter-rouge">*.java</code> filename.
This is generally best-practice, as it means it can be reused in multiple parent
workflows, or even in multiple steps within the same workflow.</p>

<p>Here we use <code class="language-plaintext highlighter-rouge">default:</code> to hard-code <code class="language-plaintext highlighter-rouge">"Hello.java"</code> as the <code class="language-plaintext highlighter-rouge">ex</code> input, however
our workflow also requires a tar file at <code class="language-plaintext highlighter-rouge">inp</code>, which we will prepare in the
<code class="language-plaintext highlighter-rouge">create-tar</code> step. At this point it is probably a good idea to refactor
<code class="language-plaintext highlighter-rouge">1st-workflow.cwl</code> to have more specific input/output names, as those also
appear in its usage as a tool.</p>

<p>It is also possible to do a less generic approach and avoid external
dependencies in the job file. So in this workflow we can generate a hard-coded
<code class="language-plaintext highlighter-rouge">Hello.java</code> file using the previously mentioned <code class="language-plaintext highlighter-rouge">InitialWorkDirRequirement</code>
requirement, before adding it to a tar file.</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  create-tar:
    requirements:
      InitialWorkDirRequirement:
        listing:
          - entryname: Hello.java
            entry: |
              public class Hello {
                public static void main(String[] argv) {
                    System.out.println("Hello from Java");
                }
              }
</code></pre></div></div>

<p>In this case our step can assume <code class="language-plaintext highlighter-rouge">Hello.java</code> rather than be parameterized, so
we can use a simpler <code class="language-plaintext highlighter-rouge">arguments</code> form as long as the CWL workflow engine
supports the <code class="language-plaintext highlighter-rouge">ShellCommandRequirement</code>:</p>

<div class="language-plaintext source highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  run:
    class: CommandLineTool
    requirements:
      ShellCommandRequirement: {}
    arguments:
      - shellQuote: false
        valueFrom: &gt;
          tar cf hello.tar Hello.java
</code></pre></div></div>

<p>Note the use of <code class="language-plaintext highlighter-rouge">shellQuote: false</code> here, otherwise the shell will try to
execute the quoted binary <code class="language-plaintext highlighter-rouge">"tar cf hello.tar Hello.java"</code>.</p>

<p>Here the <code class="language-plaintext highlighter-rouge">&gt;</code> block means that newlines are stripped, so it’s possible to write
the single command on multiple lines. Similarly, the <code class="language-plaintext highlighter-rouge">|</code> we used above will
preserve newlines, combined with <code class="language-plaintext highlighter-rouge">ShellCommandRequirement</code> this would allow
embedding a shell script.
Shell commands should however be used sparingly in CWL, as it means you
“jump out” of the workflow and no longer get reusable components, provenance or
scalability. For reproducibility and portability it is recommended to only use
shell commands together with a <code class="language-plaintext highlighter-rouge">DockerRequirement</code> hint, so that the commands
are executed in a predictable shell environment.</p>

<p>Did you notice that we didn’t split out the <code class="language-plaintext highlighter-rouge">tar cf</code> tool to a separate file,
but rather embedded it within the CWL Workflow file? This is generally not best
practice, as the tool then can’t be reused. The reason for doing it in this case
is because the command line is hard-coded with filenames that only make sense
within this workflow.</p>

<p>In this example we had to prepare a tar file outside, but only because our inner
workflow was designed to take that as an input. A better refactoring of the
inner workflow would be to take a list of Java files to compile, which would
simplify its usage as a tool step in other workflows.</p>

<p>Nested workflows can be a powerful feature to generate higher-level functional
and reusable workflow units - but just like for creating a CWL Tool description,
care must be taken to improve its usability in multiple workflows.</p>



<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li><p>A workflow can be used as a step in another workflow, if the workflow engine supports the <code class="language-plaintext highlighter-rouge">SubworkflowFeatureRequirement</code>.</p>
</li>
    
    <li><p>The workflows are specified under <code class="language-plaintext highlighter-rouge">steps</code>, with the worklow’s description file provided as the value to the <code class="language-plaintext highlighter-rouge">run</code> field.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">default</code> to specify a default value for a field, which can be overwritten by a value in the input object.</p>
</li>
    
    <li><p>Use <code class="language-plaintext highlighter-rouge">&gt;</code> to ignore newlines in long commands split over multiple lines.</p>
</li>
    
  </ul>
</blockquote>

</article>


















<!-- Manual ordering of Episodes begins here -->








  
  


<!-- Manual ordering of Extras begins here -->







<div class="row">
  <div class="col-xs-1">
    <h3 class="text-left">
      
      <a href="../21-1st-workflow/index.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-xs-10">
    
  </div>
  <div class="col-xs-1">
    <h3 class="text-right">
      
      <a href="../23-scatter-workflow/index.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


      
      






<footer>
  <div class="row">
    <div class="col-md-6 copyright" align="left">
	
    </div>
    <div class="col-md-6 help-links" align="right">
	
	<a href="/edit//_episodes/22-nested-workflows.md" data-checker-ignore>Edit on GitHub</a>
	
	/
	<a href="/blob//CONTRIBUTING.md" data-checker-ignore>Contributing</a>
	/
	<a href="/">Source</a>
	/
	<a href="/blob//CITATION" data-checker-ignore>Cite</a>
	/
	<a href="mailto:https://www.commonwl.org/#Support">Contact</a>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" align="center">
      Using <a href="https://github.com/carpentries/styles/">The Carpentries style</a>
      version <a href="https://github.com/carpentries/styles/releases/tag/v9.5.3">9.5.3</a>.
    </div>
  </div>
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
